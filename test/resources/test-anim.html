<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="keywords" content="HTML, CSS, XML, XHTML, JavaScript">
    <title>Test anim</title>
  </head>
  <body>
    <h1>Test anim</h1>
    <p>
      This page's content is animated on demand
    </p>
    <p id="anim1"></p>
    <p id="anim2"></p>
    <script>
      setTimeout(async () => {
        if (window.triggerCapture) {
          // parameter is passed as true to signify that animation is supported
          // animate is returned by capture to trigger or not an animation inside the page
          const animate = await window.triggerCapture(true)
          document.getElementById('anim1').innerHTML = 'animate=' + animate
          let i = 0
          window.animateCaptureFrame = () => {
            document.getElementById('anim2').innerHTML = i
            i++
            // return true when you want to stop
            // here 1 seconds at 15 fps
            return i > 15
          }
        }
      }, 100)
    </script>
  </body>
</html>
